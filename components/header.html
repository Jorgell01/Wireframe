<header class="topbar">
  <div class="topbar__left">
    <img src="../assets/img/logos/LOGO CIFP VIRGEN DE CANDELARIA.png" alt="Logo" class="topbar__logo" />
    <span class="topbar__title">Dashboard</span>
  </div>

  <div class="topbar__center">
    <input id="globalSearch" class="topbar__search" type="search" placeholder="Buscar..." aria-label="Buscar en el panel" />
  </div>

  <div class="topbar__right">
    <span class="topbar__user">üë§ <span id="headerUser">Usuario</span></span>
    <button id="logoutBtn" class="topbar__btn">Salir</button>
  </div>
</header>

<script>
  // Rellena el nombre y gestiona el logout
  (function() {
    const u = localStorage.getItem("usuario");
    const nameSpan = document.getElementById("headerUser");
    if (u && nameSpan) nameSpan.textContent = u;

    document.getElementById("logoutBtn")?.addEventListener("click", (e) => {
      e.preventDefault();
      // Limpiar sesi√≥n y datos relevantes
      try { localStorage.removeItem("usuario"); } catch(_){}
      try { localStorage.removeItem("token"); } catch(_){}
      // Redirecci√≥n robusta a la vista de login (relativa al documento actual)
      const loginUrl = new URL('../views/login.html', location.href).href;
      // replace() evita dejar la p√°gina anterior en el historial
      location.replace(loginUrl);
    });
  })();
</script>
