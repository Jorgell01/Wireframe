<section>
  <h2>Proveedores</h2>
  <p id="proveedores-status">Cargando proveedores...</p>
  <div id="proveedores-list"></div>

  <script>
    (async function(){
      const listEl = document.getElementById('proveedores-list');
      const status = document.getElementById('proveedores-status');
      try {
        const loader = (window.API && window.API.get) ? window.API.get('/proveedores') : fetch('/proveedores');
        const res = await loader;
        if (!res.ok) throw new Error('No hay API disponible');
        const data = await res.json();
        status.textContent = '';
        if (!data.length) { status.textContent = 'No hay proveedores.'; return; }
        listEl.innerHTML = `<ul class="list">${data.map(p=>`<li class="list-item">${p.id} — ${p.name||p.nombre} — ${p.contact||p.contacto||''}</li>`).join('')}</ul>`;
      } catch (e) {
        status.textContent = 'No se ha podido conectar con la API. Ejemplo:';
        listEl.innerHTML = `
          <ul class="list">
            <li class="list-item">1 — Proveedor Alfa — contacto@alfa.com</li>
            <li class="list-item">2 — Distribuciones Beta — ventas@beta.com</li>
          </ul>`;
        console.warn(e);
      }
    })();
  </script>
</section>
